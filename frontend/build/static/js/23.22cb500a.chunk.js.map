{"version":3,"sources":["pages/StudentSignIn.js","component/SigninComponent.js"],"names":["Signin","className","role","withRouter","history","useState","email","password","error","loading","message","showForm","values","setValues","useEffect","isAuth","push","handleSubmit","e","preventDefault","user","adminSignin","studentSignin","then","data","autheticate","err","console","log","handleChange","name","target","value","onSubmit","onChange","type","placeholder"],"mappings":"uGAAA,uCAkBeA,UAbA,WACb,OACE,eAAC,IAAD,WACE,oBAAIC,UAAU,wBAAd,4BACA,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,cAAC,IAAD,CAAiBC,KAAM,qB,yFCyFlBC,iBAhGS,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,QAASF,EAAW,EAAXA,KAClC,EAA4BG,mBAAS,CACnCC,MAAO,GACPC,SAAU,GACVC,MAAO,GACPC,SAAS,EACTC,QAAS,GACTC,UAAU,IANZ,mBAAOC,EAAP,KAAeC,EAAf,KASQP,EAAuDM,EAAvDN,MAAOC,EAAgDK,EAAhDL,SAAUC,EAAsCI,EAAtCJ,MAAOC,EAA+BG,EAA/BH,QAASC,EAAsBE,EAAtBF,QAASC,EAAaC,EAAbD,SAElDG,qBAAU,WACRC,eAAYX,EAAQY,KAAK,QAG3B,IAAMC,EAAe,SAACC,GACpBA,EAAEC,iBAEFN,EAAU,2BAAKD,GAAN,IAAcH,SAAS,EAAMD,OAAO,KAC7C,IAAMY,EAAO,CAAEd,QAAOC,aAEZ,UAATL,EACGmB,YAAYD,GACZE,YAAcF,IACfG,MAAK,SAACC,GACL,IACMA,EAAKhB,MACPK,EAAU,2BAAKD,GAAN,IAAcJ,MAAOgB,EAAKhB,MAAOC,SAAS,KAKnDgB,YAAYD,GAAM,WACZT,eAA8B,UAAlBA,cAASb,KACvBE,EAAQY,KAAK,oBAEbZ,EAAQY,KAAK,yBAInB,MAAOU,GACPC,QAAQC,IAAIF,QAKdG,EAAe,SAACC,GAAD,OAAU,SAACZ,GAC9BL,EAAU,2BAAKD,GAAN,gBAAcJ,OAAO,GAAQsB,EAAOZ,EAAEa,OAAOC,WAsCxD,OACE,sBAAK/B,UAAU,YAAf,UAnCAQ,EAAU,qBAAKR,UAAU,mBAAf,wBAAqD,GAE/DO,EAAQ,qBAAKP,UAAU,qBAAf,SAAqCO,IAAe,GAE5DE,EAAU,qBAAKT,UAAU,mBAAf,SAAmCS,IAAiB,GAmC3DC,GA/BD,mCACE,uBAAMsB,SAAUhB,EAAhB,UACE,sBAAKhB,UAAU,aAAf,UACE,uBACE+B,MAAO1B,EACP4B,SAAUL,EAAa,SACvBM,KAAK,QACLlC,UAAU,eACVmC,YAAY,oBAEd,uBAEA,uBACEJ,MAAOzB,EACP2B,SAAUL,EAAa,YACvBM,KAAK,WACLlC,UAAU,eACVmC,YAAY,0BAGhB,wBAAQnC,UAAU,kBAAlB","file":"static/js/23.22cb500a.chunk.js","sourcesContent":["import React from \"react\";\nimport SigninComponent from \"../component/SigninComponent\";\n// layout\nimport PageLayout from '../layouts/page.layout'\n\nconst Signin = () => {\n  return (\n    <PageLayout>\n      <h2 className=\"text-center pt-4 pb-4\">Student SignIn</h2>\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-md-3\">\n          <SigninComponent role={'student'}/>\n        </div>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default Signin;\n","import { studentSignin, adminSignin, autheticate, isAuth } from \"../action/authAction\";\nimport React, { useState, useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nconst SigninComponent = ({ history, role }) => {\n  const [values, setValues] = useState({\n    email: \"\",\n    password: \"\",\n    error: \"\",\n    loading: false,\n    message: \"\",\n    showForm: true,\n  });\n\n  const { email, password, error, loading, message, showForm } = values;\n\n  useEffect(() => {\n    isAuth() && history.push(\"/\");\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    setValues({ ...values, loading: true, error: false });\n    const user = { email, password };\n\n    (role === 'admin'\n      ? adminSignin(user)\n      : studentSignin(user))\n      .then((data) => {\n        try {\n          if (data.error) {\n            setValues({ ...values, error: data.error, loading: false });\n          } else {\n            //save user token to cookie\n            //save user info to localStorage\n            //authenticate user\n            autheticate(data, () => {\n              if (isAuth() && isAuth().role === 'admin') {\n                history.push(\"/admin/dashboard\");\n              } else {\n                history.push(\"/student/dashboard\");\n              }\n            });\n          }\n        } catch (err) {\n          console.log(err);\n        }\n      });\n  };\n\n  const handleChange = (name) => (e) => {\n    setValues({ ...values, error: false, [name]: e.target.value });\n  };\n\n  const showLoading = () =>\n    loading ? <div className=\"alert alert-info\">Loading...</div> : \"\";\n  const showError = () =>\n    error ? <div className=\"alert alert-danger\">{error}</div> : \"\";\n  const showMessage = () =>\n    message ? <div className=\"alert alert-info\">{message}</div> : \"\";\n\n  const signinForm = () => {\n    return (\n      <>\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <input\n              value={email}\n              onChange={handleChange(\"email\")}\n              type=\"email\"\n              className=\"form-control\"\n              placeholder=\"Type your email\"\n            />\n            <br />\n\n            <input\n              value={password}\n              onChange={handleChange(\"password\")}\n              type=\"password\"\n              className=\"form-control\"\n              placeholder=\"Type your password\"\n            />\n          </div>\n          <button className=\"btn btn-primary\">SignIn</button>\n        </form>\n      </>\n    );\n  };\n\n  return (\n    <div className=\"container\">\n      {showLoading()}\n      {showError()}\n      {showMessage()}\n      {showForm && signinForm()}\n    </div>\n  );\n};\n\nexport default withRouter(SigninComponent);\n"],"sourceRoot":""}